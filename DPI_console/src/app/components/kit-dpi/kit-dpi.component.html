<p-table [value]="kitList" #dt5 [paginator]="true" [rows]="10" [loading]="loading" styleClass="p-datatable-gridlines"
    [globalFilterFields]="['modello','operatore.nominativo']">
    <ng-template pTemplate="caption">
        <div class="space-between-flexItems">
            <div>
                <span class="p-input-icon-left p-ml-auto mr-8">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" (input)="dt5.filterGlobal($event.target.value, 'contains')"
                        placeholder="{{'KIT_COMPONENT.CERCA' | translate}}" />
                </span>
                <!-- <button pButton label="{{'KIT_COMPONENT.PULISCI' | translate}}" class="p-button-outlined"
                    icon="pi pi-filter-slash" (click)="clear(dt5)"></button> -->
            </div>
            <div>
                <button type="button" pButton pRipple icon="pi pi-file-excel" (click)="exportExcel(dt5)" label="Esporta"
                    class="p-button-success mr-8" pTooltip="XLS" tooltipPosition="bottom"></button>
                <button pButton label="{{'KIT_COMPONENT.AGGIUNGI' | translate}}" class="p-button-success"
                    icon="pi pi-plus" (click)="onCreaKit()"></button>
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="modello">{{'KIT_COMPONENT.MODELLO' | translate}}<p-sortIcon field="modello">
                </p-sortIcon>
                <p-columnFilter field="modello" matchMode="contains" display="menu" [showMatchModes]="false"
                    [showOperator]="false" [showAddButton]="false">
                    <ng-template pTemplate="header">
                        <div class="margin-top-left-bold">
                            <span class="p-text-bold">Modello</span>
                        </div>
                    </ng-template>
                </p-columnFilter>
            </th>
            <th pSortableColumn="operatore.nominativo">{{'KIT_COMPONENT.OPERAIO' | translate}} <p-sortIcon
                    field="operatore.nominativo">
                </p-sortIcon>
                <p-columnFilter field="operatore.nominativo" matchMode="contains" display="menu"
                    [showMatchModes]="false" [showOperator]="false" [showAddButton]="false">
                    <ng-template pTemplate="header">
                        <div class="margin-top-left-bold">
                            <span class="p-text-bold">Operatore</span>
                        </div>
                    </ng-template>
                </p-columnFilter>
            </th>
            <th pSortableColumn="settore.id">{{'KIT_COMPONENT.TIPO_SETTORE' | translate}} <p-sortIcon
                    field="settore.id">
                </p-sortIcon>
                <p-columnFilter field="settore.id" matchMode="in" display="menu" [showMatchModes]="false"
                    [showOperator]="false" [showAddButton]="false">
                    <ng-template pTemplate="header">
                        <div class="margin-top-left-bold">
                            <span class="p-text-bold">Selezione Settore</span>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                        <p-multiSelect [(ngModel)]="selectedSettori" [options]="settoriList"
                            (onChange)="filter($event.value)" optionLabel="nome" optionValue="id">
                        </p-multiSelect>
                    </ng-template>
                </p-columnFilter>
            </th>
            <!-- <th>{{'KIT_COMPONENT.RISOLUZIONE' | translate}}
            </th> -->
            <th>{{'KIT_COMPONENT.NOTE' | translate}}
                <p-columnFilter field="note" matchMode="contains" display="menu" [showMatchModes]="false"
                    [showOperator]="false" [showAddButton]="false">
                    <ng-template pTemplate="header">
                        <div class="margin-top-left-bold">
                            <span class="p-text-bold">Note</span>
                        </div>
                    </ng-template>
                </p-columnFilter>
            </th>
            <!-- <th>{{'KIT_COMPONENT.DIS_OPERAIO' | translate}}
            </th> -->
            <th>Operazioni
            </th>
            <!-- <th>{{'KIT_COMPONENT.ELIMINA' | translate}}
            </th> -->
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-kit>
        <tr>
            <td class="break-word">{{kit.modello}}</td>
            <td class="break-word">{{kit.operatore ? kit.operatore.nominativo : '-' }}</td>
            <td>
                <div class="v-align-center">
                    <img class="img-table-size" [smartIcon]="kit.settore.nomeIcona" alt="">{{kit.settore ?
                    kit.settore.nome : '' }}
                </div>

            </td>
            <!-- <td>{{kit.risoluzioneAutomatica}}</td> -->
            <td>{{kit.note ? kit.note : '-'}}</td>
            <!-- <td><button pButton label="{{'KIT_COMPONENT.DIS_BTN' | translate}}" class="p-button-outlined p-button"
                icon="pi pi-pencil" (click)="disassociaKitAdOperatore(kit)"></button></td> -->
            <td>
                <div class="btns-operazioni">
                    <button pButton label="{{showTextButton ? ('KIT_COMPONENT.MODIFICA' | translate) : ''}}"
                        class="p-button-outlined p-button mr-8" icon="pi pi-pencil" (click)="onUpdateKit(kit)"></button>
                    <button pButton label="{{showTextButton ? ('KIT_COMPONENT.ELIMINA' | translate) : ''}}"
                        class="p-button-outlined p-button-danger" icon="pi pi-times"
                        (click)="confirmDelete(kit)"></button>
                </div>
            </td>
        </tr>
    </ng-template>
</p-table>

<p-confirmDialog header="{{ 'KIT_COMPONENT.DEL_KIT' | translate}}" icon="pi pi-exclamation-triangle"></p-confirmDialog>